function ajaxLoad(t,a){$(".pb-container .progress-infinite").css({display:"block"}),t.load(a,function(a,e,n){"success"==e&&(t.empty().append(a),prepareDataPage(t),$(".pb-container .progress-infinite").css({display:"none"})),"error"==e&&(console.error("error"),$(".pb-container .progress-infinite").css({display:"none"}))}),updateOrderUrl(getSearch(a))}function prepareDataPage(t){createSortTable(),t.find('[data-ajax-support="true"] tbody.data-table-manual-sort').each(function(){let t=$(this)[0];Sortable.create(t,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(t))}})}),t.find("tbody.data-table-manual-sort").each(function(){let t=$(this)[0];Sortable.create(t,{animation:150,scroll:!0,handle:".data-sort-handler",onEnd:function(){updateNumber($(t))}})}),t.find("table").each(function(){$(".check-master").length>0&&$(".check-master").each(function(){$(this).on("change",function(){let t=$(this)[0].checked;$(this).closest("table").find(".check-slave").each(function(){$(this)[0].checked=t})})})})}function getSearch(t){return"?"+(splitWithTail(t,"?",1)[1]||"")}document.addEventListener("DOMContentLoaded",function(){if($('[data-ajax-support="true"]').length>0){let t=$('[data-ajax-support="true"]'),a;$(document).on("click",'[data-ajax-support="true"] .pagination a, [data-ajax-support="true"] .order-controll a',function(e){e.preventDefault(),e.stopPropagation(),a=$(this).attr("href"),ajaxLoad(t,a);let n=document.title;history.pushState({},n,a)}),window.addEventListener("popstate",function(e){e.state&&ajaxLoad(t,a=location.href)}),$(document).off("click",'[type="submit"][name="user_action"][value="delete"]'),$(document).on("click",'[data-ajax-support="true"] form.data-form [type="submit"]',function(e){if(e.preventDefault(),e.stopPropagation(),"delete"==$(this).attr("value")&&!confirm($(this).attr("data-onclik-message")))return!1;let n=$(this).closest("form");""==(a=n.attr("action"))&&(a=location.href);let r=n.serialize();r+="&"+$(this).attr("name")+"="+encodeURIComponent($(this).attr("value")),$(".pb-container .progress-infinite").css({display:"block"}),$.ajax({url:a,type:n.attr("method"),data:r,success:function(a){t.empty().append(a),prepareDataPage(t),$(".pb-container .progress-infinite").css({display:"none"})},error:function(t,a,e){console.error("Error: "+e),$(".pb-container .progress-infinite").css({display:"none"})}}),updateOrderUrl(getSearch(a))})}});